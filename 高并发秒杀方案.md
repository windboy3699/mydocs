# 高并发秒杀设计方案

## 设计思路

* 防刷设计
    * 设计有效的防刷机制，避免恶意请求调用接口。

* 分层校验
    * 鉴于只有少部分用户能够秒杀成功，尽可能在不同层将无效请求拦截并过滤掉，让真正有效的请求落入后端服务。

* 异步处理
    * 使用队列，采用异步模式提高系统并发量。

* 使用缓存
    * 数据库读写属于磁盘IO性能很低，尽可能的把数据转移到缓存来处理，极大地提升效率。

* 动静分离
    * 将静态资源进行CDN缓存，减少后端服务器的压力。

* 前端控制
    * 秒杀开始前按钮置灰不可点，秒杀开始用户点击后置灰几秒避免重复点击。
    * 如果服务器压力实在太大，用户点击按钮后，判断活动开始距今是否已经超过N秒钟，超过的用户直接返回失败。或者随机使一定比例的用户直接秒杀失败。

* 可拓展
    * 如果我们想支持更多用户，更大的并发，最好将系统设计成弹性可拓展的，如果流量迅速增大，下次拓展机器即可。

##  业务场景

假设活动开始前需要预约，预约人数上线为100万，并且已经做好防刷、限流等措施，重点在于如何处理真实的用户请求。后端要以最大100万的流量来设计架构。

